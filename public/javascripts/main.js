// Generated by CoffeeScript 1.4.0
(function() {
  var ajaxer, load_image, loader, main, poll;

  $(function() {
    return main();
  });

  main = function() {
    ajaxer();
    return poll();
  };

  poll = function() {
    return setTimeout(function() {
      ajaxer();
      return poll();
    }, 30000);
  };

  ajaxer = function() {
    return $.ajax({
      method: 'get',
      url: '/random_images',
      success: function(data) {
        return load_image(JSON.parse(data).images[0]);
      }
    });
  };

  load_image = function(url) {
    if ($('#pictures img').length > 0) {
      return $('#pictures img').fadeOut(2000, function() {
        $(this).remove();
        return loader(url);
      });
    } else {
      return loader(url);
    }
  };

  loader = function(url) {
    var img;
    img = new Image();
    $(img).hide();
    return $(img).load(function() {
      $('#pictures').append($(img));
      return $(img).fadeIn(2000);
    }).attr('src', "booth/" + (encodeURIComponent(url)));
  };

}).call(this);
